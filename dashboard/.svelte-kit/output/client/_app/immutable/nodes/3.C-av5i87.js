import{f as V,a as E}from"../chunks/CkBGWJc5.js";import{Z as w,_ as I,x as M,$ as T,h as U,D as x,a0 as W,p as Z,j as D,a as n,k as $,i as h,l as u,r as m,a1 as p,o as q,b as i}from"../chunks/Bc9KpfpO.js";import{e as B,s as L}from"../chunks/LlRm11He.js";import{i as C}from"../chunks/V8EXUeVp.js";import{r as F}from"../chunks/D9jxrO47.js";import{a as S}from"../chunks/DZ_pRahH.js";import{g as G}from"../chunks/BC4PGmkJ.js";function H(e,s,l=s){var r=new WeakSet;w(e,"input",async a=>{var t=a?e.defaultValue:e.value;if(t=y(e)?z(t):t,l(t),x!==null&&r.add(x),await I(),t!==(t=s())){var d=e.selectionStart,c=e.selectionEnd,f=e.value.length;if(e.value=t??"",c!==null){var v=e.value.length;d===c&&c===f&&v>f?(e.selectionStart=v,e.selectionEnd=v):(e.selectionStart=d,e.selectionEnd=Math.min(c,v))}}}),(U&&e.defaultValue!==e.value||M(s)==null&&e.value)&&(l(y(e)?z(e.value):e.value),x!==null&&r.add(x)),T(()=>{var a=s();if(e===document.activeElement){var t=W??x;if(r.has(t))return}y(e)&&a===z(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function y(e){var s=e.type;return s==="number"||s==="range"}function z(e){return e===""?null:+e}var J=V('<div class="error svelte-1x05zx6"> </div>'),K=V(`<div class="login-container svelte-1x05zx6"><div class="login-card svelte-1x05zx6"><h1 class="svelte-1x05zx6">Dashboard Login</h1> <p class="subtitle svelte-1x05zx6">Enter your dashboard token to continue</p> <form><div class="form-group svelte-1x05zx6"><label for="token" class="svelte-1x05zx6">Token</label> <input id="token" type="password" placeholder="Enter your token here" autocomplete="off" class="svelte-1x05zx6"/></div> <!> <button type="submit" class="svelte-1x05zx6"> </button></form> <div class="help-text svelte-1x05zx6"><p class="svelte-1x05zx6">Don't have a token?</p> <p class="svelte-1x05zx6">Use the <code class="svelte-1x05zx6">/dashboard create-token</code> command in Discord to create one.</p></div></div></div>`);function ae(e,s){Z(s,!0);let l=p(""),r=p(""),a=p(!1);async function t(){if(!n(l).trim()){i(r,"Please enter a token");return}i(a,!0),i(r,"");try{S.login(n(l)),await S.checkAuth()?G("/"):(i(r,"Invalid token"),i(l,""))}catch{i(r,"Authentication failed. Please check your token."),i(l,"")}finally{i(a,!1)}}var d=K(),c=u(d),f=h(u(c),4),v=u(f),b=h(u(v),2);F(b),m(v);var g=h(v,2);{var A=o=>{var k=J(),j=u(k,!0);m(k),D(()=>L(j,n(r))),E(o,k)};C(g,o=>{n(r)&&o(A)})}var _=h(g,2),P=u(_,!0);m(_),m(f),q(2),m(c),m(d),D(()=>{b.disabled=n(a),_.disabled=n(a),L(P,n(a)?"Authenticating...":"Login")}),B("submit",f,o=>{o.preventDefault(),t()}),H(b,()=>n(l),o=>i(l,o)),E(e,d),$()}export{ae as component};
